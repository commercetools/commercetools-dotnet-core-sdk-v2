\hypertarget{_exception_factory_8cs_source}{}\doxysection{Exception\+Factory.\+cs}
\label{_exception_factory_8cs_source}\index{/Users/mgeorge/workspace/commercetools-\/dotnet-\/api-\/sdk/commercetools.Sdk/commercetools.Base.Client/ExceptionFactory.cs@{/Users/mgeorge/workspace/commercetools-\/dotnet-\/api-\/sdk/commercetools.Sdk/commercetools.Base.Client/ExceptionFactory.cs}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00001}00001 \textcolor{keyword}{using} System;}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00002}00002 \textcolor{keyword}{using} System.Collections.Generic;}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00003}00003 \textcolor{keyword}{using} System.Linq;}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00004}00004 \textcolor{keyword}{using} System.Net.Http;}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00005}00005 \textcolor{keyword}{using} \mbox{\hyperlink{namespacecommercetools}{commercetools}}.\mbox{\hyperlink{namespacecommercetools_1_1_base}{Base}}.\mbox{\hyperlink{namespacecommercetools_1_1_base_1_1_client}{Client}}.\mbox{\hyperlink{namespacecommercetools_1_1_base_1_1_client_1_1_error}{Error}};}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00006}00006 }
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00007}00007 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacecommercetools_1_1_base_1_1_client}{commercetools.Base.Client}}}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00008}00008 \{}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00009}\mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_exception_factory}{00009}}     \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_exception_factory}{ExceptionFactory}}}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00010}00010     \{}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00011}\mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_exception_factory_af4f4fe89012ed536a51ebe29e1d2444e}{00011}}         \textcolor{keyword}{public} \textcolor{keyword}{static} \mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_api_http_exception}{ApiHttpException}} \mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_exception_factory_af4f4fe89012ed536a51ebe29e1d2444e}{Create}}(HttpRequestMessage request, HttpResponseMessage response, Func<HttpResponseMessage, Object> errorResponseBodyMapper)}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00012}00012         \{}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00013}00013             Object errorResponse = \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00014}00014 }
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00015}00015             \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00016}00016             \{}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00017}00017                 errorResponse = errorResponseBodyMapper(response);}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00018}00018             \}}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00019}00019             \textcolor{keywordflow}{catch} (Exception)}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00020}00020             \{}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00021}00021                 \textcolor{comment}{// ignored}}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00022}00022             \}}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00023}00023 }
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00024}00024             var createdException = (int)response.StatusCode >= 500}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00025}00025                 ? CreateServerException(request, response, errorResponse)}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00026}00026                 : CreateClientException(request, response, errorResponse);}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00027}00027 }
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00028}00028             \textcolor{keywordflow}{return} createdException;}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00029}00029         \}}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00030}00030 }
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00031}00031 }
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00032}00032         \textcolor{keyword}{private} \textcolor{keyword}{static} \mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_api_http_exception}{ApiHttpException}} CreateServerException(HttpRequestMessage request, HttpResponseMessage response, Object errorResponse)}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00033}00033         \{}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00034}00034             var statusCode = (int)response.\mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_api_http_exception_acc1934622b411937d25167a2e9790236}{StatusCode}};}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00035}00035             var body = response.ExtractResponseBody();}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00036}00036             var message = \$\textcolor{stringliteral}{"{}Server error response \{request.RequestUri\} \{statusCode\} \{response.ReasonPhrase\}"{}};}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00037}00037             List<KeyValuePair<string, string>> t = \textcolor{keyword}{new} List<KeyValuePair<string, string>>();}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00038}00038             var headers = \textcolor{keyword}{new} \mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_api_http_headers}{ApiHttpHeaders}}(response.Headers.SelectMany(pair => pair.Value.Select(v => \textcolor{keyword}{new} KeyValuePair<string, string>(pair.Key, v))).ToList());}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00039}00039             \textcolor{keywordflow}{switch} (statusCode)}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00040}00040             \{}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00041}00041                 \textcolor{keywordflow}{case} 500:}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00042}00042                     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_error_1_1_internal_server_error_exception}{InternalServerErrorException}}(statusCode, body,}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00043}00043                         headers, errorResponse, message);}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00044}00044                 \textcolor{keywordflow}{case} 502:}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00045}00045                     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_error_1_1_bad_gateway_exception}{BadGatewayException}}(statusCode, body,}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00046}00046                         headers, errorResponse, message);}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00047}00047                 \textcolor{keywordflow}{case} 503:}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00048}00048                     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_error_1_1_service_unavailable_exception}{ServiceUnavailableException}}(statusCode, body,}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00049}00049                         headers, errorResponse, message);}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00050}00050                 \textcolor{keywordflow}{case} 504:}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00051}00051                     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_error_1_1_gateway_timeout_exception}{GatewayTimeoutException}}(statusCode, body,}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00052}00052                         headers, errorResponse, message);}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00053}00053             \}}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00054}00054 }
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00055}00055             \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_error_1_1_api_server_exception}{ApiServerException}}(statusCode, body,}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00056}00056                 headers, errorResponse, message);}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00057}00057         \}}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00058}00058 }
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00059}00059         \textcolor{keyword}{private} \textcolor{keyword}{static} ApiHttpException CreateClientException(HttpRequestMessage request, HttpResponseMessage response, Object errorResponse)}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00060}00060         \{}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00061}00061             var statusCode = (int)response.StatusCode;}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00062}00062             var body = response.ExtractResponseBody();}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00063}00063             var message = \$\textcolor{stringliteral}{"{}Client error response \{request.RequestUri\} \{statusCode\} \{response.ReasonPhrase\}"{}};}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00064}00064             var headers = \textcolor{keyword}{new} ApiHttpHeaders(response.Headers.SelectMany(pair => pair.Value.Select(v => \textcolor{keyword}{new} KeyValuePair<string, string>(pair.Key, v))).ToList());}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00065}00065             \textcolor{keywordflow}{switch} (statusCode)}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00066}00066             \{}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00067}00067                 \textcolor{keywordflow}{case} 400:}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00068}00068                     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_error_1_1_bad_request_exception}{BadRequestException}}(statusCode, body,}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00069}00069                         headers, errorResponse, message);}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00070}00070                 \textcolor{keywordflow}{case} 401:}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00071}00071                     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_error_1_1_unauthorized_exception}{UnauthorizedException}}(statusCode, body,}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00072}00072                         headers, errorResponse, message);}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00073}00073                 \textcolor{keywordflow}{case} 403:}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00074}00074                     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_error_1_1_forbidden_exception}{ForbiddenException}}(statusCode, body,}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00075}00075                         headers, errorResponse, message);}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00076}00076                 \textcolor{keywordflow}{case} 404:}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00077}00077                     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_error_1_1_not_found_exception}{NotFoundException}}(statusCode, body,}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00078}00078                         headers, errorResponse, message);}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00079}00079                 \textcolor{keywordflow}{case} 409:}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00080}00080                     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_error_1_1_concurrent_modification_exception}{ConcurrentModificationException}}(statusCode, body,}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00081}00081                         headers, errorResponse, message);}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00082}00082             \}}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00083}00083 }
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00084}00084             \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classcommercetools_1_1_base_1_1_client_1_1_error_1_1_api_client_exception}{ApiClientException}}(statusCode, body,}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00085}00085                 headers, errorResponse, message);}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00086}00086         \}}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00087}00087     \}}
\DoxyCodeLine{\Hypertarget{_exception_factory_8cs_source_l00088}00088 \}}

\end{DoxyCode}
